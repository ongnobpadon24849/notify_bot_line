name: 1. Send Clock-In Notification

on:
  schedule:
    # üö® ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ô GitHub ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏≤‡∏Å‡∏• (UTC)
    # ‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏ó‡∏¢ (UTC+7) 08:55 ‡∏ô. = 01:55 ‡∏ô. ‡∏Ç‡∏≠‡∏á UTC
    # (8 ‡πÇ‡∏°‡∏á‡πÄ‡∏ä‡πâ‡∏≤ - 7 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á = ‡∏ï‡∏µ 1)
    # ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ "‡∏ô‡∏≤‡∏ó‡∏µ ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ‡∏ß‡∏±‡∏ô ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏ß‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå"
    - cron: '55 1 * * *' # 55 ‡∏ô‡∏≤‡∏ó‡∏µ, ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 1 (‡∏ï‡∏µ 1 UTC)

  # ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏Å‡∏î "‡∏ó‡∏î‡∏™‡∏≠‡∏ö" ‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ
  workflow_dispatch:

jobs:
  send_message:
    runs-on: ubuntu-latest # ‡∏¢‡∏∑‡∏°‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå Ubuntu (Linux)
    steps:
      - name: 1. Check out code
        uses: actions/checkout@v3 # ‡∏î‡∏∂‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏à‡∏≤‡∏Å "‡∏ö‡πâ‡∏≤‡∏ô" (Repo)

      - name: 2. Set up Python
        uses: actions/setup-python@v4 # ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Python
        with:
          python-version: '3.10' # ‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô

      - name: 3. Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt # ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á line-bot-sdk

      - name: 4. Run Python script
        env:
          # ‡∏î‡∏∂‡∏á‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏à‡∏≤‡∏Å "‡∏ï‡∏π‡πâ‡πÄ‡∏ã‡∏ü" ‡∏°‡∏≤‡πÉ‡∏™‡πà‡πÉ‡∏ô Environment
          LINE_ACCESS_TOKEN: ${{ secrets.LINE_ACCESS_TOKEN }}
          LINE_USER_ID: ${{ secrets.LINE_USER_ID }}
        run: |
          # ‡∏£‡∏±‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "clock_in" ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ
          python send_notify.py "clock_in"
